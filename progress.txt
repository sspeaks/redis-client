# Ralph Progress Log
Started: Wed Feb 11 17:51:37 PST 2026
---

## Codebase Patterns
- Build with `nix-shell --run "cabal build <target>"` for Haskell code
- Build with `dotnet build` for C# code in benchmarks/dotnet-rest/
- The `redis-client:redis` library re-exports Multiplexer and MultiplexPool from `lib/redis/Redis.hs`
- `cabal.project` must include `benchmarks/haskell-rest` as a package
- Test with `make test` (requires nix-build, runs full E2E suite)
- Trailing commas before closing `}` in Haskell record syntax cause parse errors in nix-build GHC
- ClusterConfig has a `clusterUseMultiplexing` field that must be set explicitly

## 2026-02-12 - US-001
- Created branch `ralph/fair-rest-benchmark` from `ralph/cluster-performance-parity`
- Checked out all benchmark files (benchmarks/dotnet-rest, haskell-rest, scripts, shared, results) from `ralph/rest-cache-benchmark`
- Added `benchmarks/haskell-rest` to `cabal.project`
- Fixed `clusterUseMultiplexing` field in haskell-rest Main.hs (was missing)
- Fixed trailing comma parse errors in test/ClusterE2E/Utils.hs and test/ClusterE2E/TopologyRefresh.hs
- Added `node_modules` to .gitignore
- Verified: `cabal build haskell-rest-benchmark` succeeds, `dotnet build` succeeds, Multiplexer/MultiplexPool available, all 19 E2E tests pass
- Files changed: cabal.project, .gitignore, benchmarks/*, tasks/*, test/ClusterE2E/Utils.hs, test/ClusterE2E/TopologyRefresh.hs
- **Learnings for future iterations:**
  - The `ralph/rest-cache-benchmark` branch didn't have multiplexing; `ralph/cluster-performance-parity` does
  - Redis module re-exports everything from Multiplexer and MultiplexPool modules
  - nix-build uses a different GHC than cabal build locally and is stricter about syntax
  - The haskell-rest benchmark depends on `redis-client:redis` sublibrary
---
